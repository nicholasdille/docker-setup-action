name: 'docker-setup'
description: 'Install tools from the container ecosystem'
branding:
  icon: 'package'
  color: 'blue'
inputs:
  version:
    description: 'Version of docker-setup to use'
    required: false
    default: 'latest'
  tools:
    description: 'List of tools to install (space separated)'
    required: false
runs:
  using: 'composite'
  steps:

  - name: Install docker-setup
    shell: bash
    run: |
      echo "Installing docker-setup"
      echo "Requested version ${{ inputs.version }}"

      url="https://github.com/nicholasdille/docker-setup/releases/latest/download/docker-setup"
      if test "${{ inputs.version }}" != "latest"; then
          url="https://github.com/nicholasdille/docker-setup/releases/download/v${{ inputs.version }}/docker-setup"
      fi

      echo "Using URL ${url}"
      curl --url "${url}" \
          --silent \
          --location \
          --output /usr/local/bin/docker-setup
      chmod +x /usr/local/bin/docker-setup

      docker-setup --version

  - name: Install tools
    shell: bash
    run: |
      echo "Installing tools"
      docker-setup update
      docker-setup install ${{ inputs.tools }}